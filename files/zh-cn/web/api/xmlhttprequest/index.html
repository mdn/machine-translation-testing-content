---
title: XMLHttpRequest
slug: Web/API/XMLHttpRequest
tags:
  - AJAX
  - API
  - Communication
  - HTTP
  - Interface
  - Reference
  - Web
  - XHR
  - XMLHttpRequest
translation_of: Web/API/XMLHttpRequest
---
<div>{{DefaultAPISidebar("XMLHttpRequest")}}</div><p><span class="seoSummary"><code>XMLHttpRequest</code> （XHR）对象用于与服务器交互。您可以从URL检索数据，而不必刷新整个页面。这使网页可以更新页面的一部分，而不会干扰用户的操作。</span> <code>XMLHttpRequest</code>被大量使用{{Glossary("AJAX")}}编程。</p><p>{{InheritanceDiagram(650, 150)}}</p><p>尽管名称如此， <code>XMLHttpRequest</code>可以用于检索任何类型的数据，而不仅仅是XML。</p><p>如果您的通信需要涉及从服务器接收事件数据或消息数据，请考虑通过以下方式使用<a href="/en-US/docs/Web/API/Server-sent_events">服务器发送的事件：</a>{{domxref("EventSource")}}接口。对于全双工通信， <a href="/en-US/docs/Web/API/WebSockets_API">WebSockets</a>可能是一个更好的选择。</p><h2 id="Constructor">建设者</h2><dl><dt>{{domxref("XMLHttpRequest.XMLHttpRequest", "XMLHttpRequest()")}}</dt><dd>构造函数初始化XMLHttpRequest。必须在其他任何方法调用之前调用它。</dd></dl><h2 id="Properties">物产</h2><p><em>该接口还继承了</em>{{domxref("XMLHttpRequestEventTarget")}}<em>和的</em>{{domxref("EventTarget")}}<em>。</em> </p><dl><dt id="xmlhttprequest-onreadystatechange">{{domxref("XMLHttpRequest.onreadystatechange")}}</dt><dd>一个{{domxref("EventHandler")}}每当<code>readyState</code>属性更改时，即会调用该方法。 </dd><dt id="xmlhttprequest-readystate">{{domxref("XMLHttpRequest.readyState")}}{{readonlyinline}}</dt><dd>返回<code>unsigned short</code> ，即请求的状态。 </dd><dt>{{domxref("XMLHttpRequest.response")}}{{readonlyinline}}</dt><dd>返回一个{{jsxref("ArrayBuffer")}}，{{domxref("Blob")}} ，{{domxref("Document")}} ，JavaScript对象或{{domxref("DOMString")}}，具体取决于{{domxref("XMLHttpRequest.responseType")}}，其中包含响应实体主体。 </dd><dt id="xmlhttprequest-responsetext">{{domxref("XMLHttpRequest.responseText")}}{{readonlyinline}}</dt><dd>返回一个{{domxref("DOMString")}}包含请求为文本，或响应<code>null</code> ，如果请求不成功或尚未被发送。 </dd><dt id="xmlhttprequest-responsetype">{{domxref("XMLHttpRequest.responseType")}}</dt><dd>是定义响应类型的枚举值。 </dd><dt id="xmlhttprequest-responsexml">{{domxref("XMLHttpRequest.responseURL")}}{{readonlyinline}}</dt><dd>返回响应的序列化URL，如果URL为null，则返回空字符串。 </dd><dt id="xmlhttprequest-responsexml">{{domxref("XMLHttpRequest.responseXML")}}{{readonlyinline}}</dt><dd>返回一个{{domxref("Document")}}包含对请求的响应；如果请求不成功，尚未发送或无法将其解析为XML或HTML，则为<code>null</code> 。不适用于工人。 </dd><dt id="xmlhttprequest-status">{{domxref("XMLHttpRequest.status")}}{{readonlyinline}}</dt><dd>返回一个<code>unsigned short</code> ，其状态为请求的响应。 </dd><dt id="xmlhttprequest-statustext">{{domxref("XMLHttpRequest.statusText")}}{{readonlyinline}}</dt><dd>返回一个{{domxref("DOMString")}}包含HTTP服务器返回的响应字符串。不像{{domxref("XMLHttpRequest.status")}}，其中包括响应消息的整个文本（例如，“ <code>200 OK</code> ”）。<div class="note"><p><strong>注意：</strong>根据HTTP / 2规范（ <a href="https://http2.github.io/http2-spec/#rfc.section.8.1.2.4">8.1.2.4</a> <a href="https://http2.github.io/http2-spec/#HttpResponse">Response Pseudo-Header Fields</a> ），HTTP / 2没有定义一种方式来承载HTTP / 1.1状态行中包含的版本或原因短语。 </p></div></dd><dt id="xmlhttprequest-timeout">{{domxref("XMLHttpRequest.timeout")}}</dt><dd>是一个<code>unsigned long</code>整数，表示请求在自动终止之前可以花费的毫秒数。 </dd><dt id="xmlhttprequesteventtarget-ontimeout">{{domxref("XMLHttpRequestEventTarget.ontimeout")}}</dt><dd>是一个{{domxref("EventHandler")}}每当请求超时时都会调用。 {{gecko_minversion_inline("12.0")}}</dd><dt id="xmlhttprequest-upload">{{domxref("XMLHttpRequest.upload")}}{{readonlyinline}}</dt><dd>是一个{{domxref("XMLHttpRequestUpload")}}，代表上传过程。 </dd><dt id="xmlhttprequest-withcredentials">{{domxref("XMLHttpRequest.withCredentials")}}</dt><dd>是一个{{domxref("Boolean")}}指示是否应使用cookie或授权标头之类的凭据发出跨站点<code>Access-Control</code>请求。</dd></dl><h3 id="Non-standard_properties">非标特性</h3><dl><dt>{{domxref("XMLHttpRequest.channel")}}{{ReadOnlyInline}}</dt><dd>是一个{{Interface("nsIChannel")}}。对象在执行请求时使用的通道。 </dd><dt>{{domxref("XMLHttpRequest.mozAnon")}}{{ReadOnlyInline}}</dt><dd>是一个布尔值。如果为true，则将发送不带Cookie和身份验证标头的请求。 </dd><dt>{{domxref("XMLHttpRequest.mozSystem")}}{{ReadOnlyInline}}</dt><dd>是一个布尔值。如果为true，则不会对请求执行相同的原始策略。</dd><dt>{{domxref("XMLHttpRequest.mozBackgroundRequest")}}</dt><dd>是一个布尔值。它指示对象是否代表后台服务请求。 </dd><dt>{{domxref("XMLHttpRequest.mozResponseArrayBuffer")}}{{gecko_minversion_inline("2.0")}}{{obsolete_inline("6")}}{{ReadOnlyInline}}</dt><dd>{{jsxref("ArrayBuffer")}} 。对请求的响应，作为JavaScript类型数组。 </dd><dt>{{domxref("XMLHttpRequest.multipart")}}{{obsolete_inline("22")}}</dt><dd><strong>在Firefox / Gecko 22中，此仅Gecko的功能（布尔值）已被删除。</strong>请改用Progress事件中的<a href="/en-US/docs/Web/API/Server-sent_events">Server-Sent Events</a> ， <a href="/en-US/docs/Web/API/WebSockets_API">Web Sockets</a>或<code>responseText</code> 。</dd></dl><h3 id="Event_handlers">事件处理程序</h3><p>所有浏览器均支持<code>onreadystatechange</code>作为<code>XMLHttpRequest</code>实例的属性。</p><p>从那时起，在各种浏览器（ <code>onload</code> ， <code>onerror</code> ， <code>onprogress</code>等）中实现了许多其他事件处理程序。请参阅<a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest">使用XMLHttpRequest</a> 。</p><p>包括Firefox在内的最新浏览器也支持通过标准监听<code>XMLHttpRequest</code>事件。{{domxref("EventTarget.addEventListener", "addEventListener()")}}除了将<code>on*</code>属性设置为处理函数之外，还包括API。</p><h2 id="Methods">方法</h2><dl><dt>{{domxref("XMLHttpRequest.abort()")}}</dt><dd>如果请求已经发送，则中止该请求。</dd><dt>{{domxref("XMLHttpRequest.getAllResponseHeaders()")}}</dt><dd>返回所有响应标头，以{{Glossary("CRLF")}}，作为字符串，如果未收到响应，则为<code>null</code> 。</dd><dt>{{domxref("XMLHttpRequest.getResponseHeader()")}}</dt><dd>返回包含指定标题的文本的字符串；如果尚未收到响应或响应中不存在标题，则返回<code>null</code> 。</dd><dt>{{domxref("XMLHttpRequest.open()")}}</dt><dd>初始化请求。</dd><dt>{{domxref("XMLHttpRequest.overrideMimeType()")}}</dt><dd>覆盖服务器返回的MIME类型。</dd><dt>{{domxref("XMLHttpRequest.send()")}}</dt><dd>发送请求。如果请求是异步的（默认设置），则此方法在发送请求后立即返回。</dd><dt>{{domxref("XMLHttpRequest.setRequestHeader()")}}</dt><dd>设置HTTP请求标头的值。您必须在<a href="#open"><code>open()</code></a>之后但<code>send()</code>之前调用<code>setRequestHeader()</code> <code>send()</code> 。</dd></dl><h3 id="Non-standard_methods">非标准方法</h3><dl><dt>{{domxref("XMLHttpRequest.init()")}}</dt><dd>从C ++代码初始化要使用的对象。<div class="warning"><strong>警告：</strong><em>不得</em>从JavaScript调用此方法。</div></dd><dt>{{domxref("XMLHttpRequest.openRequest()")}}</dt><dd>初始化请求。此方法将在本机代码中使用；要初始化来自JavaScript代码的请求，请改用<a class="internal" href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIXMLHttpRequest#open()"><code>open()</code></a> 。请参阅<code>open()</code>的文档。 </dd><dt>{{domxref("XMLHttpRequest.sendAsBinary()")}}{{deprecated_inline()}}</dt><dd> <code>send()</code>方法的一种变体，用于发送二进制数据。</dd></dl><h2 id="Events">大事记</h2><dl><dt>{{domxref("XMLHttpRequest/abort_event", "abort")}}</dt><dd>当请求中止时触发，例如因为程序调用了{{domxref("XMLHttpRequest.abort()")}}。<br>也可以通过{{domxref("XMLHttpRequestEventTarget/onabort", "onabort")}}属性。</dd><dt>{{domxref("XMLHttpRequest/error_event", "error")}}</dt><dd>当请求遇到错误时触发。<br>也可以通过{{domxref("XMLHttpRequestEventTarget/onerror", "onerror")}}属性。</dd><dt>{{domxref("XMLHttpRequest/load_event", "load")}}</dt><dd>触发时{{domxref("XMLHttpRequest")}}交易成功完成。<br>也可以通过{{domxref("XMLHttpRequestEventTarget/onload", "onload")}}属性。</dd><dt>{{domxref("XMLHttpRequest/loadend_event", "loadend")}}</dt><dd>请求完成后（无论是否成功）触发{{domxref("XMLHttpRequest/load_event", "load")}}）或失败（在{{domxref("XMLHttpRequest/abort_event", "abort")}}要么{{domxref("XMLHttpRequest/error_event", "error")}}）。<br>也可以通过{{domxref("XMLHttpRequestEventTarget/onloadend", "onloadend")}}属性。</dd><dt>{{domxref("XMLHttpRequest/loadstart_event", "loadstart")}}</dt><dd>当请求开始加载数据时触发。<br>也可以通过{{domxref("XMLHttpRequestEventTarget/onloadstart", "onloadstart")}}属性。</dd><dt>{{domxref("XMLHttpRequest/progress_event", "progress")}}</dt><dd>请求收到更多数据时定期触发。<br>也可以通过{{domxref("XMLHttpRequestEventTarget/onprogress", "onprogress")}}属性。</dd><dt>{{domxref("XMLHttpRequest/timeout_event", "timeout")}}</dt><dd>由于预设时间到期而导致进度终止时触发。<br>也可以通过{{domxref("XMLHttpRequestEventTarget/ontimeout", "ontimeout")}}属性。</dd></dl><h2 id="Specifications">技术指标</h2><table class="standard-table"><thead><tr><th scope="col">规范</th><th scope="col">状态</th><th scope="col">评论</th></tr></thead><tbody><tr><td>{{SpecName('XMLHttpRequest')}}</td><td>{{Spec2('XMLHttpRequest')}}</td><td>实时标准，最新版本</td></tr></tbody></table><h2 id="Browser_compatibility">浏览器兼容性</h2><div>{{Compat("api.XMLHttpRequest")}}</div><h2 id="See_also">也可以看看</h2><ul><li>{{domxref("XMLSerializer")}}：将DOM树序列化为XML</li><li>涵盖<code>XMLHttpRequest</code> MDN教程：<ul><li> <a href="/en-US/docs/AJAX/Getting_Started">Ajax-入门</a></li><li><a href="/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest">使用XMLHttpRequest</a></li><li> <a href="/en-US/docs/Web/API/XMLHttpRequest/HTML_in_XMLHttpRequest">XMLHttpRequest中的HTML</a></li><li><a href="/en-US/docs/Web/API/Fetch_API" title="提取API">提取API</a></li></ul></li><li> <a class="external" href="http://www.html5rocks.com/en/tutorials/file/xhr2/">HTML5巨石— XMLHttpRequest2中的新技巧</a></li><li>功能策略指令{{httpheader("Feature-Policy/sync-xhr", "sync-xhr")}}</li></ul>
