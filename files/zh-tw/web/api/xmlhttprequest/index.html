---
title: XMLHttpRequest
slug: Web/API/XMLHttpRequest
tags:
  - AJAX
  - API
  - Communication
  - HTTP
  - Interface
  - Reference
  - Web
  - XHR
  - XMLHttpRequest
translation_of: Web/API/XMLHttpRequest
---
<div>{{DefaultAPISidebar("XMLHttpRequest")}}</div><p><span class="seoSummary"><code>XMLHttpRequest</code> （XHR）對像用於與服務器交互。您可以從URL檢索數據，而不必刷新整個頁面。這使網頁可以更新頁面的一部分，而不會干擾用戶的操作。</span> <code>XMLHttpRequest</code>被大量使用{{Glossary("AJAX")}}編程。</p><p>{{InheritanceDiagram(650, 150)}}</p><p>儘管名稱如此， <code>XMLHttpRequest</code>可以用於檢索任何類型的數據，而不僅僅是XML。</p><p>如果您的通信需要涉及從服務器接收事件數據或消息數據，請考慮通過以下方式使用<a href="/en-US/docs/Web/API/Server-sent_events">服務器發送的事件：</a>{{domxref("EventSource")}}接口。對於全雙工通信， <a href="/en-US/docs/Web/API/WebSockets_API">WebSockets</a>可能是一個更好的選擇。</p><h2 id="Constructor">建設者</h2><dl><dt>{{domxref("XMLHttpRequest.XMLHttpRequest", "XMLHttpRequest()")}}</dt><dd>構造函數初始化XMLHttpRequest。必須在其他任何方法調用之前調用它。</dd></dl><h2 id="Properties">物產</h2><p><em>該接口還繼承了</em>{{domxref("XMLHttpRequestEventTarget")}}<em>和的</em>{{domxref("EventTarget")}}<em>。</em> </p><dl><dt id="xmlhttprequest-onreadystatechange">{{domxref("XMLHttpRequest.onreadystatechange")}}</dt><dd>一個{{domxref("EventHandler")}}每當<code>readyState</code>屬性更改時，即會調用該方法。 </dd><dt id="xmlhttprequest-readystate">{{domxref("XMLHttpRequest.readyState")}}{{readonlyinline}}</dt><dd>返回<code>unsigned short</code> ，即請求的狀態。 </dd><dt>{{domxref("XMLHttpRequest.response")}}{{readonlyinline}}</dt><dd>返回一個{{jsxref("ArrayBuffer")}}，{{domxref("Blob")}} ，{{domxref("Document")}} ，JavaScript對像或{{domxref("DOMString")}}，具體取決於{{domxref("XMLHttpRequest.responseType")}}，其中包含響應實體主體。 </dd><dt id="xmlhttprequest-responsetext">{{domxref("XMLHttpRequest.responseText")}}{{readonlyinline}}</dt><dd>返回一個{{domxref("DOMString")}}包含請求為文本，或響應<code>null</code> ，如果請求不成功或尚未被發送。 </dd><dt id="xmlhttprequest-responsetype">{{domxref("XMLHttpRequest.responseType")}}</dt><dd>是定義響應類型的枚舉值。 </dd><dt id="xmlhttprequest-responsexml">{{domxref("XMLHttpRequest.responseURL")}}{{readonlyinline}}</dt><dd>返迴響應的序列化URL，如果URL為null，則返回空字符串。 </dd><dt id="xmlhttprequest-responsexml">{{domxref("XMLHttpRequest.responseXML")}}{{readonlyinline}}</dt><dd>返回一個{{domxref("Document")}}包含對請求的響應；如果請求不成功，尚未發送或無法將其解析為XML或HTML，則為<code>null</code> 。不適用於工人。 </dd><dt id="xmlhttprequest-status">{{domxref("XMLHttpRequest.status")}}{{readonlyinline}}</dt><dd>返回一個<code>unsigned short</code> ，其狀態為請求的響應。 </dd><dt id="xmlhttprequest-statustext">{{domxref("XMLHttpRequest.statusText")}}{{readonlyinline}}</dt><dd>返回一個{{domxref("DOMString")}}包含HTTP服務器返回的響應字符串。不像{{domxref("XMLHttpRequest.status")}}，其中包括響應消息的整個文本（例如，“ <code>200 OK</code> ”）。<div class="note"><p><strong>注意：</strong>根據HTTP / 2規範（ <a href="https://http2.github.io/http2-spec/#rfc.section.8.1.2.4">8.1.2.4</a> <a href="https://http2.github.io/http2-spec/#HttpResponse">Response Pseudo-Header Fields</a> ），HTTP / 2沒有定義一種方式來承載HTTP / 1.1狀態行中包含的版本或原因短語。 </p></div></dd><dt id="xmlhttprequest-timeout">{{domxref("XMLHttpRequest.timeout")}}</dt><dd>是一個<code>unsigned long</code>整數，表示請求在自動終止之前可以花費的毫秒數。 </dd><dt id="xmlhttprequesteventtarget-ontimeout">{{domxref("XMLHttpRequestEventTarget.ontimeout")}}</dt><dd>是一個{{domxref("EventHandler")}}每當請求超時時都會調用。 {{gecko_minversion_inline("12.0")}}</dd><dt id="xmlhttprequest-upload">{{domxref("XMLHttpRequest.upload")}}{{readonlyinline}}</dt><dd>是一個{{domxref("XMLHttpRequestUpload")}}，代表上傳過程。 </dd><dt id="xmlhttprequest-withcredentials">{{domxref("XMLHttpRequest.withCredentials")}}</dt><dd>是一個{{domxref("Boolean")}}指示是否應使用cookie或授權標頭之類的憑據發出跨站點<code>Access-Control</code>請求。</dd></dl><h3 id="Non-standard_properties">非標特性</h3><dl><dt>{{domxref("XMLHttpRequest.channel")}}{{ReadOnlyInline}}</dt><dd>是一個{{Interface("nsIChannel")}}。對像在執行請求時使用的通道。 </dd><dt>{{domxref("XMLHttpRequest.mozAnon")}}{{ReadOnlyInline}}</dt><dd>是一個布爾值。如果為true，則將發送不帶Cookie和身份驗證標頭的請求。 </dd><dt>{{domxref("XMLHttpRequest.mozSystem")}}{{ReadOnlyInline}}</dt><dd>是一個布爾值。如果為true，則不會對請求執行相同的原始策略。</dd><dt>{{domxref("XMLHttpRequest.mozBackgroundRequest")}}</dt><dd>是一個布爾值。它指示對像是否代表後台服務請求。 </dd><dt>{{domxref("XMLHttpRequest.mozResponseArrayBuffer")}}{{gecko_minversion_inline("2.0")}}{{obsolete_inline("6")}}{{ReadOnlyInline}}</dt><dd>{{jsxref("ArrayBuffer")}} 。對請求的響應，作為JavaScript類型數組。 </dd><dt>{{domxref("XMLHttpRequest.multipart")}}{{obsolete_inline("22")}}</dt><dd><strong>在Firefox / Gecko 22中，此僅Gecko的功能（布爾值）已被刪除。</strong>請改用Progress事件中的<a href="/en-US/docs/Web/API/Server-sent_events">服務器發送事件</a>， <a href="/en-US/docs/Web/API/WebSockets_API">Web套接字</a>或<code>responseText</code> 。</dd></dl><h3 id="Event_handlers">事件處理程序</h3><p>所有瀏覽器均支持<code>onreadystatechange</code>作為<code>XMLHttpRequest</code>實例的屬性。</p><p>從那時起，在各種瀏覽器（ <code>onload</code> ， <code>onerror</code> ， <code>onprogress</code>等）中實現了許多其他事件處理程序。請參閱<a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest">使用XMLHttpRequest</a> 。</p><p>包括Firefox在內的最新瀏覽器也支持通過標準監聽<code>XMLHttpRequest</code>事件。{{domxref("EventTarget.addEventListener", "addEventListener()")}}除了將<code>on*</code>屬性設置為處理函數之外，還包括API。</p><h2 id="Methods">方法</h2><dl><dt>{{domxref("XMLHttpRequest.abort()")}}</dt><dd>如果請求已經發送，則中止該請求。</dd><dt>{{domxref("XMLHttpRequest.getAllResponseHeaders()")}}</dt><dd>返回所有響應標頭，以{{Glossary("CRLF")}}，作為字符串，如果未收到響應，則為<code>null</code> 。</dd><dt>{{domxref("XMLHttpRequest.getResponseHeader()")}}</dt><dd>返回包含指定標題的文本的字符串；如果尚未收到響應或響應中不存在標題，則返回<code>null</code> 。</dd><dt>{{domxref("XMLHttpRequest.open()")}}</dt><dd>初始化請求。</dd><dt>{{domxref("XMLHttpRequest.overrideMimeType()")}}</dt><dd>覆蓋服務器返回的MIME類型。</dd><dt>{{domxref("XMLHttpRequest.send()")}}</dt><dd>發送請求。如果請求是異步的（默認設置），則此方法在發送請求後立即返回。</dd><dt>{{domxref("XMLHttpRequest.setRequestHeader()")}}</dt><dd>設置HTTP請求標頭的值。您必須在<a href="#open"><code>open()</code></a>之後但<code>send()</code>之前調用<code>setRequestHeader()</code> <code>send()</code> 。</dd></dl><h3 id="Non-standard_methods">非標準方法</h3><dl><dt>{{domxref("XMLHttpRequest.init()")}}</dt><dd>從C ++代碼初始化要使用的對象。<div class="warning"><strong>警告：</strong><em>不得</em>從JavaScript調用此方法。</div></dd><dt>{{domxref("XMLHttpRequest.openRequest()")}}</dt><dd>初始化請求。此方法將在本機代碼中使用；要初始化來自JavaScript代碼的請求，請改用<a class="internal" href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIXMLHttpRequest#open()"><code>open()</code></a> 。請參閱<code>open()</code>的文檔。 </dd><dt>{{domxref("XMLHttpRequest.sendAsBinary()")}}{{deprecated_inline()}}</dt><dd> <code>send()</code>方法的一種變體，用於發送二進制數據。</dd></dl><h2 id="Events">大事記</h2><dl><dt>{{domxref("XMLHttpRequest/abort_event", "abort")}}</dt><dd>當請求中止時觸發，例如因為程序調用了{{domxref("XMLHttpRequest.abort()")}}。<br>也可以通過{{domxref("XMLHttpRequestEventTarget/onabort", "onabort")}}屬性。</dd><dt>{{domxref("XMLHttpRequest/error_event", "error")}}</dt><dd>當請求遇到錯誤時觸發。<br>也可以通過{{domxref("XMLHttpRequestEventTarget/onerror", "onerror")}}屬性。</dd><dt>{{domxref("XMLHttpRequest/load_event", "load")}}</dt><dd>觸發時{{domxref("XMLHttpRequest")}}交易成功完成。<br>也可以通過{{domxref("XMLHttpRequestEventTarget/onload", "onload")}}屬性。</dd><dt>{{domxref("XMLHttpRequest/loadend_event", "loadend")}}</dt><dd>請求完成後（無論是否成功）觸發{{domxref("XMLHttpRequest/load_event", "load")}}）或失敗（在{{domxref("XMLHttpRequest/abort_event", "abort")}}要么{{domxref("XMLHttpRequest/error_event", "error")}}）。<br>也可以通過{{domxref("XMLHttpRequestEventTarget/onloadend", "onloadend")}}屬性。</dd><dt>{{domxref("XMLHttpRequest/loadstart_event", "loadstart")}}</dt><dd>當請求開始加載數據時觸發。<br>也可以通過{{domxref("XMLHttpRequestEventTarget/onloadstart", "onloadstart")}}屬性。</dd><dt>{{domxref("XMLHttpRequest/progress_event", "progress")}}</dt><dd>請求收到更多數據時定期觸發。<br>也可以通過{{domxref("XMLHttpRequestEventTarget/onprogress", "onprogress")}}屬性。</dd><dt>{{domxref("XMLHttpRequest/timeout_event", "timeout")}}</dt><dd>由於預設時間到期而導致進度終止時觸發。<br>也可以通過{{domxref("XMLHttpRequestEventTarget/ontimeout", "ontimeout")}}屬性。</dd></dl><h2 id="Specifications">技術指標</h2><table class="standard-table"><thead><tr><th scope="col">規範</th><th scope="col">狀態</th><th scope="col">評論</th></tr></thead><tbody><tr><td>{{SpecName('XMLHttpRequest')}}</td><td>{{Spec2('XMLHttpRequest')}}</td><td>實時標準，最新版本</td></tr></tbody></table><h2 id="Browser_compatibility">瀏覽器兼容性</h2><div>{{Compat("api.XMLHttpRequest")}}</div><h2 id="See_also">也可以看看</h2><ul><li>{{domxref("XMLSerializer")}}：將DOM樹序列化為XML</li><li>涵蓋<code>XMLHttpRequest</code> MDN教程：<ul><li> <a href="/en-US/docs/AJAX/Getting_Started">Ajax-入門</a></li><li><a href="/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest">使用XMLHttpRequest</a></li><li> <a href="/en-US/docs/Web/API/XMLHttpRequest/HTML_in_XMLHttpRequest">XMLHttpRequest中的HTML</a></li><li><a href="/en-US/docs/Web/API/Fetch_API" title="提取API">提取API</a></li></ul></li><li> <a class="external" href="http://www.html5rocks.com/en/tutorials/file/xhr2/">HTML5巨石— XMLHttpRequest2中的新技巧</a></li><li>功能策略指令{{httpheader("Feature-Policy/sync-xhr", "sync-xhr")}}</li></ul>
